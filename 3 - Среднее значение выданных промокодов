#Задача 4
#Постройте столбчатую диаграмму, отображающую зависимость оценки от среднего количества выданных промокодов. 
#Сначала подготовьте данные:
#    найдите уникальные значения оценок из столбца score;
#    посчитайте среднее количество промокодов для каждой оценки.
#Учитывайте только данные «до внедрения роботов» — на них роботы обучались.
#Чтобы построить график, отложите по оси X все возможные значения оценок из переменной scores, а по оси Y — среднее количество промокодов для каждой оценки. 

import pandas
import seaborn
# считываем данные
data = pandas.read_csv('support_data.csv')
# для каждой пары интервал-оценка считаем количество выданных промокодов
sum_promo = data.groupby(['interval', 'score'])['promo'].sum()
# для каждой пары интервал-оценка считаем количество записей
count_promo = data.groupby(['interval', 'score'])['promo'].count()

# выбираем данные только для интервала «До внедрения роботов»
sum_promo = sum_promo[['До внедрения роботов']]
count_promo = count_promo[['До внедрения роботов']]

# соберите все уникальные оценки из столбца score
scores = data['score'].unique()
# разделите количество промокодов на количество записей
promo_chance = sum_promo / count_promo

# постройте столбчатую диаграмму
seaborn.barplot(x=scores, y=promo_chance)

# Вывод, результат
#[ 3  2  0  5  1  7  4  6  9  8 10]
#interval              score
#До внедрения роботов  0        0.012152
#                      1        0.010365
#                      2        0.010157
#                      3        0.007404
#                      4        0.012346
#                      5        0.010239
#                      6        0.005994
#                      7        0.013867
#                      8        0.702020
#                      9        0.700000
#                      10       0.773779
#Name: promo, dtype: float64
# так же столбчатая диаграмма. X - уникальные значения от 3 до 10, y - дробные значения.
